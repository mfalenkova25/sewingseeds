<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Sewing Seeds - Handmade toys</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        :root {
            --bg-main: #f7f1e8;
            --bg-light: #fbf6ef;
            --text-main: #2b2521;
            --text-muted: #7c6c60;
            --accent: #a37d63;
            --accent-btn: #a37d63;
        }

        body {
            background: var(--bg-main);
            font-family: 'Montserrat', sans-serif;
            color: var(--text-main);
            margin: 0;
        }

        a { color: inherit; text-decoration: none; }

        /* ========== HEADER   ========== */

        .top-bar {
            background: var(--bg-main);
            /*border-bottom: 1px solid #e3d6c9;*/
            padding: 10px 0;
        }

        .top-bar-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 24px;
        }

        .top-left {
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .logo-svg {
            width: 78px;
            height: auto;
            flex-shrink: 0;
        }

        .logo-text-title {
            font-size: 20px;
            font-weight: 500;
        }

        .logo-text-sub {
            font-size: 14px;
            color: var(--text-muted);
        }

        .top-middle {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-left: 16px;
            padding-left: 16px;
            border-left: 1px solid #e3d6c9;
            font-size: 14px;
            white-space: nowrap;
        }

        .top-middle strong {
            font-size: 16px;
        }

        .top-middle a {
            font-size: 14px;
            color: var(--accent);
            margin-left: 10px;
        }

        .top-right {
            margin-left: auto;
        }

        .menu-button {
            padding: 8px 20px;
            border-radius: 999px;  
            border: none;
            background: var(--accent-btn);
            color: #fff;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .menu-dots {
            display: grid;
            grid-template-columns: repeat(2, 4px);
            grid-auto-rows: 4px;
            gap: 4px;
        }

        .menu-dots span {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: #fff;
        }

        @media (max-width: 768px) {
            .top-bar-inner {
                flex-wrap: wrap;
                row-gap: 12px;
            }
            .top-middle {
                border-left: none;
                padding-left: 0;
                margin-left: 0;
            }
        }
 

        /* ========== GALLERY ========== */

.gallery-section {
  padding: 50px 0;
}

/* Masonry layout via JS columns (variable heights + nice look) */
.masonry {
  display: flex;
  gap: 16px;
  align-items: flex-start;
}

/* Columns created by JS */
.masonry-col {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 16px;
  min-width: 0;
}

/* Card */
.masonry-item {
  position: relative;
  cursor: zoom-in;
  background: #fff;
  border: 1px solid #e0d6ca;
  overflow: hidden;
  transition: transform .35s ease, box-shadow .35s ease;
}

.masonry-item img {
  width: 100%;
  height: auto;
  display: block;
}

.masonry-item:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 26px rgba(0,0,0,0.14);
}

/* Caption overlay: hidden by default, visible only on hover, only if text exists */
.masonry-item .caption-overlay {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;

  padding: 12px 14px;
  font-size: 13px;
  line-height: 1.45;

  color: #fff;
  background: linear-gradient(to top, rgba(0,0,0,0.70), rgba(0,0,0,0));

  opacity: 0;
  transform: translateY(6px);
  transition: opacity .25s ease, transform .25s ease;
  pointer-events: none;
}

/* show only on hover */
.masonry-item:hover .caption-overlay {
  opacity: 1;
  transform: translateY(0);
}

/* if caption is empty -> do not render */
.caption-overlay:empty {
  display: none;
}

/* Responsive: number of columns is controlled by JS,
   but this keeps spacing friendly on small screens */
@media (max-width: 576px) {
  .masonry { gap: 12px; }
  .masonry-col { gap: 12px; }
}

/* ======= Lightbox (not fullscreen) ======= */
.lightbox {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 9999;
}

.lightbox.is-open {
  display: block;
}

.lightbox-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.55);
}

.lightbox-dialog {
  position: relative;
  max-width: min(980px, calc(100vw - 32px));
  max-height: calc(100vh - 90px);
  margin: 60px auto 0;

  background: #fffaf4;
  border: 1px solid #e3d6c9;
  border-radius: 0;
  overflow: hidden;
  box-shadow: 0 18px 50px rgba(0,0,0,0.35);
}

.lightbox-dialog img {
  display: block;
  width: 100%;
  height: auto;
  max-height: calc(100vh - 160px);
  object-fit: contain;
  background: #fff;
}

.lightbox-close {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 38px;
  height: 38px;

  border: 1px solid #e3d6c9;
  background: #fffdf9;

  font-size: 26px;
  line-height: 1;
  cursor: pointer;
}

.lightbox-caption {
  padding: 12px 14px;
  font-size: 14px;
  color: var(--text-main);
  border-top: 1px solid #e3d6c9;
  background: #fffdf9;
}

        /* ========== VOLUNTEERS ========== */

        .volunteers-section {
            padding: 60px 0;
            background: var(--bg-light);
        }

        .volunteer-card {
            text-align: center;
            margin-bottom: 40px;
        }

        .volunteer-photo {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 auto 14px;
            border: 2px solid #e6d8ca;
        }

        .volunteer-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .volunteer-name {
            font-family: 'Cormorant Garamond', serif;
            font-size: 22px;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }

        .volunteer-text {
            font-size: 14px;
            color: var(--text-muted);
            line-height: 1.5;
            padding: 0 10px;
        }

        /* ========== BOXES / FORMS ========== */

        .section-soft, .quote-card, .contact-card {
            border-radius: 0;
            border: 1px solid #e3d6c9;
            background: #fffaf4;
        }

        input, textarea {
            border-radius: 0 !important;
        }

        .btn-soft {
            border-radius: 999px;
            background: var(--accent);
            border: none;
            color: white;
            padding: 10px 22px;
            text-transform: uppercase;
            letter-spacing: 0.14em;
            font-size: 13px;
        }

        /* ========== FOOTER ========== */

        footer {
            background: var(--bg-light);
            border-top: 1px solid #e3d6c9;
            padding: 18px 0;
            font-size: 12px;
            text-align: center;
        }
		
		
		
		/* ======= SECTION LABEL ======= */
.section-label {
    font-size: 13px;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 8px;
}

/* ======= SECTION TITLE ======= */
.section-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: 32px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    margin-bottom: 20px;
    line-height: 1.15;
}

/* ======= PARAGRAPH TEXT ======= */
.section-text {
    font-size: 15px;
    line-height: 1.75;
    color: var(--text-main);
    margin-bottom: 16px;
}

/* ======= SOFT BLOCK (beige card) ======= */
.section-soft {
    background: #fffaf4;
    border: 1px solid #e6d8ca;
    padding: 28px;
    border-radius: 0;
    box-shadow: 0 0 0 rgba(0,0,0,0); /* clean, minimal */
}

/* ======= QUOTE CARDS ======= */
.quote-card {
    background: #fffdf9;
    border: 1px solid #eaded3;
    padding: 20px 22px;
    font-size: 14px;
    line-height: 1.7;
    color: var(--text-main);
    border-radius: 0;
}

.quote-card small {
    display: block;
    margin-top: 10px;
    font-size: 11px;
    letter-spacing: 0.16em;
    color: var(--text-muted);
    text-transform: uppercase;
}

/* ======= INFO LIST ======= */
.info-list {
    list-style: none;
    padding-left: 0;
    margin: 0;
    font-size: 14px;
    line-height: 1.7;
    color: var(--text-main);
}

.info-list li {
    margin-bottom: 3px;
}

/* Line separator */
.section-soft hr {
    border-color: #e3d6c9;
    margin: 16px 0;
}


/* ======= GALLERY: hover caption overlay ======= */
.masonry-item {
  position: relative;
  cursor: zoom-in;
}

.masonry-item .caption-overlay {
  position: absolute;
  left: 0; right: 0; bottom: 0;
  padding: 12px 14px;
  font-size: 13px;
  line-height: 1.45;
  color: #fff;
  background: linear-gradient(to top, rgba(0,0,0,0.70), rgba(0,0,0,0));
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .25s ease, transform .25s ease;
  pointer-events: none;
}

.masonry-item:hover .caption-overlay {
  opacity: 1;
  transform: translateY(0);
}

/* Если текста нет — не показываем блок вообще */
.caption-overlay:empty { display: none; }

/* ======= Lightbox (not fullscreen) ======= */
.lightbox {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 9999;
}

.lightbox.is-open { display: block; }

.lightbox-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.55);
}

.lightbox-dialog {
  position: relative;
  max-width: min(980px, calc(100vw - 32px));
  max-height: calc(100vh - 90px);
  margin: 60px auto 0;
  background: #fffaf4;
  border: 1px solid #e3d6c9;
  border-radius: 0;
  overflow: hidden;
  box-shadow: 0 18px 50px rgba(0,0,0,0.35);
}

.lightbox-dialog img {
  display: block;
  width: 100%;
  height: auto;
  max-height: calc(100vh - 160px);
  object-fit: contain;
  background: #fff;
}

.lightbox-close {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 38px;
  height: 38px;
  border: 1px solid #e3d6c9;
  background: #fffdf9;
  font-size: 26px;
  line-height: 1;
}

.lightbox-caption {
  padding: 12px 14px;
  font-size: 14px;
  color: var(--text-main);
  border-top: 1px solid #e3d6c9;
  background: #fffdf9;
}

/* Mobile spacing for entire gallery block */
@media (max-width: 768px) {
  .gallery-section {
    padding-left: 20px;
    padding-right: 20px;
  }
}

.masonry-item img {
  filter: saturate(0.85) contrast(1.05) brightness(1.03) sepia(0.12);
}
/* card frame */
.masonry-item {
  background: #fffaf4;
  border: 1px solid rgba(163,125,99,0.25);
  padding: 2px;            /* рамка вокруг фото */
}

.masonry-item img {
  border: 1px solid rgba(43,37,33,0.10);
}

/* subtle overlay to unify different lighting */
.masonry-item::after {
  content: "";
  position: absolute;
  inset: 10px; /* совпадает с padding карточки */
  pointer-events: none;
  background:
    linear-gradient(180deg, rgba(247,241,232,0.10), rgba(247,241,232,0.18)),
    radial-gradient(120% 80% at 30% 20%, rgba(255,255,255,0.22), rgba(255,255,255,0));
  mix-blend-mode: soft-light;
  opacity: 0.9;
}



.volunteers-group-photo {
    background: #efe7de;
    padding: 18px;
    border-radius: 14px;
    position: relative;
}

.volunteers-group-photo img {
    width: 100%;
    border-radius: 10px;
    display: block;
}

.volunteers-description {
    font-size: 15px;
    color: #7a6a5a;
    letter-spacing: 0.04em;
}

/* декоративные веточки */
.volunteers-group-photo::before,
.volunteers-group-photo::after {
    content: "";
    position: absolute;
    width: 90px;
    height: 90px;
    background-image: url('/images/leaf-decoration.svg');
    background-size: contain;
    background-repeat: no-repeat;
    opacity: 0.4;
}

.volunteers-group-photo::before {
    top: -20px;
    left: -20px;
}

.volunteers-group-photo::after {
    bottom: -20px;
    right: -20px;
    transform: rotate(180deg);
}
    </style>
</head>
<body>


<!-- ===== HEADER ===== -->
<header class="top-bar">
    <div class="container-fluid px-4">
        <div class="top-bar-inner">

            <!-- LOGO + TEXT -->
            <div class="top-left">

                <!-- YOUR LOGO (187×126 px) -->
                <img src="logo.png" 
                     alt="Sewing Seeds Logo" 
                     class="logo-img" 
                     style="width:187px; object-fit:contain;">

                <div>
                    <div class="logo-text-title">Handmade Toys</div>
                    <!--div class="logo-text-sub">Handmade Toys</div-->
                </div>
            </div>

            <!-- PHONE + INSTAGRAM -->
            <div class="top-middle">
                <div>
                    <strong>+1 503 980-5582</strong>
                </div>
                <div>
                    <a href="https://www.instagram.com/sewingseedspdx" target="_blank">
                        Instagram
                    </a>
                </div>
            </div>

            <!-- MENU BUTTON -->
            <div class="top-right">
                <button class="menu-button" type="button">
                    <span>Menu</span>
                    <span class="menu-dots">
                        <span></span><span></span><span></span><span></span>
                    </span>
                </button>
            </div>

        </div>
    </div>
</header>
<!-- ===== HERO ===== -->
<section class="container">
    <img src="banner.png" 
         alt="Sewing Seeds Banner" 
         width="731" 
         style="max-width:100%; height:auto; display:block;">
</section>

<!-- GALLERY SECTION – moved up -->
<section class="gallery-section container">
    <div class="mb-4">
        <div class="text-muted" style="letter-spacing:0.18em; text-transform:uppercase; font-size:13px;">
            Toy Stories
        </div>
        <h2 style="font-family:'Cormorant Garamond',serif; letter-spacing:0.16em; text-transform:uppercase;">
            Gallery of Handmade Friends
        </h2>
    </div>

<div id="gallery" class="masonry"></div>

<div class="text-center mt-4">
  <button id="showMoreBtn" class="btn-soft" type="button" style="display:none;">
    Show more
  </button>
</div>

<!-- Popup / Lightbox -->
<div id="lightbox" class="lightbox" aria-hidden="true">
  <div class="lightbox-backdrop"></div>
  <div class="lightbox-dialog" role="dialog" aria-modal="true">
    <button class="lightbox-close" type="button" aria-label="Close">×</button>
    <img id="lightboxImg" alt="">
    <div id="lightboxCaption" class="lightbox-caption" style="display:none;"></div>
  </div>
</div>

</section>

<!-- MISSION -->
<section class="py-5">
    <div class="container-fluid px-3 px-md-4">
        <div class="row g-4 align-items-stretch">
            <div class="col-lg-7">
                <div class="section-soft h-100">
                    <div class="section-label">Mission Statement</div>
                    <div class="section-title">Why we sew</div>
                    <p class="section-text">
                        Sewing Seeds works to create stuffed animals and blankets for the purpose of donating to patients at
                        children’s hospitals. Our intentions are to bring joy to children while easing the burden of difficult
                        times for them and their families. Through these works we hope to further the greater goal of supporting
                        and uplifting our overall community. We believe God has been generous with us so it is our purpose to be
                        generous with others.
                    </p>
                    <p class="section-text mb-0">
                        We welcome all levels of sewing skills (or lack thereof) and regardless of religious beliefs or church
                        affiliations.
                    </p>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="h-100 d-flex flex-column gap-3">
                    <div class="quote-card">
                        “Please thank all the people who had a part in creating these ‘Lovies’ and let them know that it means
                        so much that they support the children at Shriners in such a special, unique way!!”
                        <small>– Shriners Hospital</small>
                    </div>
                    <div class="quote-card">
                        “We appreciate your support more than you know!”
                        <small>– Doernbecher Hospital</small>
                    </div>
                    <div class="quote-card">
                        “The stories the ladies attach to the stuffies are inspirational in the sense that they help create a
                        journey that she can take on the stuffie in the Operating Room…”
                        <small>– Shriners Hospital</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- MORE ON WHAT WE DO -->
<section class="pb-5">
    <div class="container-fluid px-3 px-md-4">
        <div class="row g-4 align-items-start">
            <div class="col-lg-6">
                <div class="section-label">More on what we do</div>
                <div class="section-title">Little creations, big comfort</div>
                <p class="section-text">
                    We are so blessed to see how God is working through this ministry. We have received many donated sewing
                    machines, sewing tools and notions, fabric, as well as batting and stuffing to make this ministry possible.
                    Sewing Seeds gathers every week to work on various projects including stuffed animals, rag dolls, quilts,
                    and accessories that bring our toys to life for kids.
                </p>
                <p class="section-text">
                    These items are then donated in a monthly delivery to Doernbecher and Shriners Children’s Hospitals. As
                    requested, many stuffed animals are specially customized by our team to include unique personalities and
                    backstories or even birthday-themed stuffed animals paired with festive cards for kids to color and enjoy.
                </p>
                <p class="section-text mb-0">
                    Overall, we believe this ministry to be a blessing to the patients, their families, and the hospitals that
                    provide their care as well as a great encouragement to those that gather every week (or even once in a
                    while) to sew these little creations and connect with each other.
                </p>
            </div>
            <div class="col-lg-6">
                <div class="section-soft h-100">
                    <div class="row gy-4">
                        <div class="col-sm-6">
                            <div class="section-label">Where</div>
                            <ul class="info-list">
                                <li>Powellhurst Baptist Church</li>
                                <li>3435 SE 112th Ave.</li>
                                <li>Portland, OR 97266</li>
                            </ul>
                        </div>
                        <div class="col-sm-6">
                            <div class="section-label">When</div>
                            <ul class="info-list">
                                <li>Mondays</li>
                                <li>6:30–8:00 pm</li>
                            </ul>
                        </div>
                        <div class="col-12">
                            <hr class="my-3" style="border-color: var(--border-soft);">
                            <div class="section-label">Services</div>
                            <p class="section-text mb-2">
                                Services – 9:30 am | Sunday School – 11:00 am Sundays
                            </p>
                            <p class="section-text mb-0">
                                Powellhurst Baptist Church<br>
                                3435 SE 112th Ave. Portland, OR 97266
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- VOLUNTEERS -->
<section class="volunteers-section">
    <div class="container">
        <div class="text-center mb-5">
            <div class="text-muted" style="letter-spacing:0.18em; text-transform:uppercase; font-size:13px;">Our Team</div>
            <h2 style="font-family:'Cormorant Garamond',serif; letter-spacing:0.14em; text-transform:uppercase;">
                Volunteers
            </h2>
        </div>

		<div class="row justify-content-center">
			<div class="col-lg-10">

				<div class="volunteers-group-photo">
					<img src="images/volunteers.png" alt="Sewing Seeds volunteers">
				</div>

				<div class="volunteers-description text-center mt-4">
					Our volunteers sew with love, share stories, and create comfort
					for children through handmade toys.
				</div>

			</div>
		</div>
    </div>
</section>



<footer>
    © 2026 Sewing Seeds – Powellhurst Baptist Church
</footer>

<script>
window.addEventListener('DOMContentLoaded', () => {
  const galleryEl = document.getElementById('gallery');
  const showMoreBtn = document.getElementById('showMoreBtn');

  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  const lightboxCaption = document.getElementById('lightboxCaption');

  if (!galleryEl || !showMoreBtn || !lightbox || !lightboxImg || !lightboxCaption) {
    console.error('Gallery markup not found. Check #gallery, #showMoreBtn, #lightbox elements.');
    return;
  }

  // ==== SETTINGS ====
  const BASE_PATH = 'toys/';
  const TOTAL_IMAGES = 100;
  const BATCH_SIZE = 8;

  // если у тебя реально строго .jpg — можно оставить только ['jpg']
  const EXT_LIST = ['jpg', 'jpeg', 'png', 'webp'];

  const captions = {
    // 1: "Caption text...",
  };

  function getCaption(i) {
    const c = captions[i];
    return (typeof c === 'string' && c.trim()) ? c.trim() : '';
  }

  function getColumnCount() {
    const w = window.innerWidth;
    if (w <= 576) return 1;
    if (w <= 768) return 2;
    if (w <= 1200) return 3;
    return 4;
  }

  let colCount = 0;
  let cols = [];
  let nextIndex = 1;

  const itemsStore = []; // {i, src, caption}

  // ---------- Lightbox ----------
  function openLightbox(src, caption) {
    lightboxImg.src = src;

    if (caption) {
      lightboxCaption.textContent = caption;
      lightboxCaption.style.display = '';
    } else {
      lightboxCaption.textContent = '';
      lightboxCaption.style.display = 'none';
    }

    lightbox.classList.add('is-open');
    lightbox.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';
  }

  function closeLightbox() {
    lightbox.classList.remove('is-open');
    lightbox.setAttribute('aria-hidden', 'true');
    lightboxImg.src = '';
    document.body.style.overflow = '';
  }

  lightbox.addEventListener('click', (e) => {
    if (e.target.classList.contains('lightbox-backdrop')) closeLightbox();
  });
  lightbox.querySelector('.lightbox-close').addEventListener('click', closeLightbox);
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && lightbox.classList.contains('is-open')) closeLightbox();
  });

  // ---------- Helpers ----------
  function setupColumns() {
    const desired = getColumnCount();
    if (desired === colCount) return;

    colCount = desired;
    galleryEl.innerHTML = '';
    cols = [];

    for (let c = 0; c < colCount; c++) {
      const col = document.createElement('div');
      col.className = 'masonry-col';
      cols.push(col);
      galleryEl.appendChild(col);
    }

    rebuildLayout();
  }

  function getShortestColumn() {
    let best = cols[0];
    let bestH = cols[0].getBoundingClientRect().height;

    for (let i = 1; i < cols.length; i++) {
      const h = cols[i].getBoundingClientRect().height;
      if (h < bestH) {
        bestH = h;
        best = cols[i];
      }
    }
    return best;
  }

  function createItemElement(i, src, caption) {
    const item = document.createElement('div');
    item.className = 'masonry-item';

    const img = document.createElement('img');
    img.src = src;
    img.alt = caption ? caption : `Toy photo ${i}`;
    img.loading = 'lazy';

    item.appendChild(img);

    if (caption) {
      const overlay = document.createElement('div');
      overlay.className = 'caption-overlay';
      overlay.textContent = caption;
      item.appendChild(overlay);
    }

    item.addEventListener('click', () => openLightbox(src, caption));
    return { item, img };
  }

  // tries i.jpg / i.jpeg / i.png ...
  function resolveSrc(i) {
    return new Promise((resolve) => {
      let idx = 0;

      const tryNext = () => {
        if (idx >= EXT_LIST.length) return resolve(null);

        const ext = EXT_LIST[idx++];
        const src = `${BASE_PATH}${i}.${ext}`;

        const test = new Image();
        test.onload = () => resolve(src);
        test.onerror = () => tryNext();
        test.src = src;
      };

      tryNext();
    });
  }

  function placeItem(i, src, caption) {
    const { item, img } = createItemElement(i, src, caption);

    // Ждём загрузку/декод картинки и только потом меряем высоты колонок
    const afterImageReady = () => {
      requestAnimationFrame(() => {
        const col = getShortestColumn();
        col.appendChild(item);
      });
    };

    if (img.complete) {
      afterImageReady();
    } else {
      img.addEventListener('load', afterImageReady, { once: true });
      img.addEventListener('error', () => item.remove(), { once: true });
    }
  }

  function rebuildLayout() {
    cols.forEach(c => c.innerHTML = '');
    for (const rec of itemsStore) {
      placeItem(rec.i, rec.src, rec.caption);
    }
  }

  async function renderNextBatch() {
    const end = Math.min(nextIndex + BATCH_SIZE - 1, TOTAL_IMAGES);

    for (let i = nextIndex; i <= end; i++) {
      const src = await resolveSrc(i);
      if (!src) {
        console.warn(`Image not found for #${i} in ${BASE_PATH} (tried: ${EXT_LIST.join(', ')})`);
        continue;
      }

      const caption = getCaption(i);
      itemsStore.push({ i, src, caption });
      placeItem(i, src, caption);
    }

    nextIndex = end + 1;
    showMoreBtn.style.display = (nextIndex <= TOTAL_IMAGES) ? '' : 'none';
  }

  showMoreBtn.addEventListener('click', renderNextBatch);

  setupColumns();
  renderNextBatch();

  window.addEventListener('resize', () => {
    const desired = getColumnCount();
    if (desired !== colCount) setupColumns();
  });
});
</script>
</body>
</html>

